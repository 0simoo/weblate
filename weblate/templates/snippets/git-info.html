{% load i18n %}
{% load permissions %}
{% load translations %}

{% perm 'vcs.view' object as user_can_see_git_repository %}

{% if user_can_see_git_repository %}
<tr>
<th>{% trans "Repository" %}</th>
<td colspan="2">
<code class="git-repo ui-corner-all">{{ object.get_repo_url }}</code>
</td>
</tr>

<tr>
<th>{% trans "Repository branch" %}</th>
<td colspan="2">
{{ object.get_repo_branch }}
</td>
</tr>

{% with object.get_last_remote_commit as commit %}
<tr>
<th>{% trans "Last remote commit" %}</th>
<td colspan="2">
{{ commit.summary }} <code data-toggle="tooltip" title="{{ commit.revision }}">{{ commit.shortrevision }}</code><br />
{% comment %}Translators: For example: "nijel authored five days ago"{% endcomment %}
{% blocktrans with commit.author_name as author and commit.authordate|naturaltime as date %}{{ author }} authored {{ date }}{% endblocktrans %}<br />
</td>
</tr>
{% endwith %}

{% with object.get_export_url as export_url %}
{% if export_url %}
<tr>
<th>{% trans "Repository containing Weblate translations" %}</th>
<td colspan="2"><code class="git-repo ui-corner-all">{{ export_url }}</code></td>
</tr>
{% endif %}
{% endwith %}
{% endif %}
